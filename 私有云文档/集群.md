集群是指云资源管理的集合，包含了运行应用的云主机等资源。集群包括虚拟机集群和容器集群两种类型。

集群操作支持创建集群、删除集群、导入节点、移出节点等操作。


## 新建集群

1. 登录TSF控制台。
2. 单击左侧导航栏中的 **集群**，单击集群列表页的【新建】。
 ![](https://main.qcloudimg.com/raw/2348e3469caaadb31b72e62853df5dd4.png)
3. 设置集群的基本信息。
 - **集群名称**：集群名称，不超过60个字符。
 - **集群类型**：选择集群类型
     - 虚拟机集群：虚拟机集群中的节点用于部署虚拟机应用。
     - 容器集群：容器集群中的节点用于部署容器应用。
 - **集群描述**：集群的描述，不超过200个字符。
 
![](https://main.qcloudimg.com/raw/9dd15d9f43880d903669fb455bd90bdd.png)

## 删除集群

1. 在集群列表页中，单击某集群右侧的【删除】。
2. 弹出提示页面，显示集群下的节点信息，单击【确定】删除集群。
![](https://main.qcloudimg.com/raw/76924d98ccccd6898a1d0823f240bd14.png)

>**注意：**
> 集群在删除期间，无法对外提供服务，请提前做好准备，以免造成影响。

## 虚拟机集群添加已有节点

1. 在集群列表页中，找到希望添加节点的虚拟机集群，单击目标集群 **ID/集群名** 。
2. 点击节点列表上方的 **导入节点** 按钮。
![](https://main.qcloudimg.com/raw/873a907bd4153ddd675844ba1e66a176.png)
3. 选择节点所属的命名空间，如果没有合适的命名空间，则点击“新建命名空间”进行新建。
![](https://main.qcloudimg.com/raw/8b2e001d0112ada570db5d8bc7a36d74.png)
4. 点击“复制”按钮将需要复制的脚本复制到希望添加进入集群的实例上，在实例上运行。这段脚本用户将agent安装到虚拟机上，执行成功之后需要稍等片刻，主机即可显示在节点列表上。

## 从虚拟机集群移出节点

1. 在集群列表页中点击集群的 **ID/名称**，进入集群的节点列表页面，选择需要移出的云主机，单击右侧 【移出】。
2. 对于已经绑定了资源的云主机，需要点击绑定的应用资源，在应用页面将实例下线，才能进行删除操作。
![](https://main.qcloudimg.com/raw/bd2ff45ca23534418804c1612a1bac3e.png)
3. 对于已经解绑应用的云主机，点击右侧的删除按钮，将脚本复制到对应主机上进行删除，并点击“提交”按钮完成删除。
![](https://main.qcloudimg.com/raw/e86c4d1f9605f2366e86546af04cfac6.png)

## 容器集群添加已有节点
1. 在tsf控制台上新建容器集群。
2. 在灵雀云控制台上找到对应的集群，点击“添加云主机”按钮，弹出对话框，复制脚本，在需要添加为master的节点上执行这个脚本。
![](https://main.qcloudimg.com/raw/b6aa760e02b94e4f2b0c0c3a75b885a8.png)
3. 执行完步骤2之后，在灵雀云控制台上可以看到添加的节点，部署集群按钮变成可操作，点击部署集群，进行部署。部署过程比较长，耐心等待，部署完成后集群和节点都变成运行中。
![](https://main.qcloudimg.com/raw/5b1ac712d05e6f048df9252f8ad56e9e.png)
4. 参考【创建命名空间】流程，在TSF控制台上创建对应集群的命名空间。

5. 在tsf控制台中集群-对应集群的详情-节点列表-导入节点页面选择命名空间并将脚本复制在实例上运行。完成slave节点的添加。

![](https://main.qcloudimg.com/raw/1ca0f4c39225995fc1c96866c5a95bfe.png)

## 从容器集群移出节点

1. 在集群列表页中点击集群的 **ID/名称**，进入集群的节点列表页面，选择需要移出的云主机，单击右侧 【移出】。
2. 对于已经绑定了资源的云主机，需要点击绑定的应用资源，在应用页面将实例下线，才能进行删除操作。
![](https://main.qcloudimg.com/raw/bd2ff45ca23534418804c1612a1bac3e.png)
3. 对于已经解绑应用的云主机，点击右侧的删除按钮，将脚本复制到对应主机上进行删除，并点击“提交”按钮完成删除。请注意这个过程可能需要一定时间。 
![](https://main.qcloudimg.com/raw/e86c4d1f9605f2366e86546af04cfac6.png)


